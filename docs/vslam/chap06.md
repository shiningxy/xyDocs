# 第六章

官方教程文档: https://www.yuque.com/u1507140/vslam-hmh/yu9032oczfnbnr2y

SVD代码参考: https://github.com/leizhang-geo/machine_learning_algorithms

SVD原理参考: https://zhuanlan.zhihu.com/p/29846048

多视图几何知识基础: https://note.youdao.com/ynoteshare/index.html?id=5e98f487c40ef22f90e1177f29271be5&type=note&_time=1695220123081

视觉SLAM根据传感器硬件可以分为不同的流派，如单目，双目，深度相机等。其中，单目SLAM的难度较其它传感器实现的SLAM要困难许多，原因在于纯粹的单目相机缺乏真实的深度信息，会出现尺度等价性问题。

单目相机的初始化往往由对极几何约束完成。对极几何约束应用的场景是已知两幅图像之间若干匹配点，求解两幅图像之间的相机运动，是一个2D-2D的问题。

详细的推导过程可以参考《视觉SLAM14讲》中的过程，其核心求解是一个本质矩阵E（或者带有内参矩阵的基础矩阵），本质矩阵E的特点是具有尺度等价性。

位姿R和t是由E通过奇异值分解得到的，其中R是正交矩阵，其逆等于自身的转置，相当于自身的约束可以克服掉尺度等价性；但是t没有办法克服尺度等价性，即这个t乘上任意一个非零的正数，都能满足对极几何约束。

# 思考题

## 本质矩阵的自由度为多少？

本质矩阵自由度为5

平移[T]x的自由度是3，旋转矩阵R的自由度是3，加在一起是6个参数，也就是要想确定E矩阵，确定6个参数就够了，不用考虑E矩阵的所有9个参数
同时E满足下面约束，所以E的自由度是6-1=5

本质矩阵，基础矩阵，自由度及其解法: https://note.youdao.com/ynoteshare/index.html?id=5e98f487c40ef22f90e1177f29271be5&type=note&_time=1695220123081

## 直接法求本质矩阵的过程涉及求解齐次线性方程，而对于齐次线性方程的解，要么只有零解，要么有无穷多个解，这里取哪一个解呢？

在计算本质矩阵（essential matrix）时，通常是在计算相机之间的运动关系（例如，基于对极几何来恢复相机的运动）时使用的。本质矩阵的计算涉及齐次线性方程组，而且在实践中，齐次线性方程组的解通常有无穷多个。

在这种情况下，不是所有的解都是有效的本质矩阵。本质矩阵必须满足特定的条件，以便表示两个相机之间的运动。这些条件包括：

* 本质矩阵的秩必须为2。
* 本质矩阵的两个奇异值必须相等，而第三个奇异值必须为零。

由于这些条件，齐次线性方程组的解中只有一部分是有效的本质矩阵，而不是所有解都满足这些条件。因此，在计算本质矩阵时，我们需要筛选出满足这些条件的解。一种常见的方法是使用奇异值分解（Singular Value Decomposition，SVD）来分解齐次线性方程组的解，并确保奇异值满足上述条件。

总之，对于本质矩阵的计算，所以我们需要找到满足特定条件的解，而不是选择其中一个解。这些条件确保了本质矩阵的合法性，以便用于相机运动恢复和三维重建等计算中。


# 代码

参考: https://github.com/gaoxiang12/slambook2/tree/master/ch7