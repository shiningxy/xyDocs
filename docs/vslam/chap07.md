# 第七章

官方教程文档: https://www.yuque.com/u1507140/vslam-hmh/lusyrekv9r5g0q4n

## 视觉里程计之相对位姿估计

> 已知3D-2D匹配关系，估计相机相对位姿的常用算法


1. DLT
2. P3P
3. EPnP
4. ICP

## 思考题

### 1.EPNP算法为什么会更高效？

EPnP（Efficient Perspective-n-Point）算法之所以更高效，主要是因为它在解决相机定位问题（也称为PnP问题）时，具有以下几个优势：

1. 数值稳定性：EPnP算法使用了数值稳定的数学技巧，以减少数值误差的影响。这可以帮助提高算法的稳定性和可靠性，尤其是在噪声较大的情况下。
2. 高效性：EPnP算法采用了一种迭代的优化方法，通过先验信息（如相机内参矩阵）和已知的3D点与2D点的对应关系，逐步优化相机的位姿。这种迭代优化方法通常比传统的解PnP问题的方法更快速，特别是对于大规模的问题。
3. 精度：EPnP算法能够提供较高的相机位姿估计精度，因为它不仅使用了2D-3D点的对应关系，还考虑了相机内参矩阵的信息。这有助于减小定位误差，使得算法更适用于需要高精度相机定位的应用，如计算机视觉中的三维重建和机器人导航等领域。
4. 可扩展性：EPnP算法的设计使得它可以轻松地与其他计算机视觉技术集成，例如特征匹配、三维点云处理等。这使得它成为了一个广泛适用的工具，可以与其他算法协同工作，解决更复杂的问题。

总之，EPnP算法通过结合数值稳定性、高效性、精度和可扩展性等优势，使得它在相机定位问题中更高效，尤其在实际应用中需要处理大规模数据或要求高精度的情况下更为有利。这使得EPnP算法成为了计算机视觉和三维几何处理领域的重要工具之一。



### 2.在特征点匹配过程中，不可避免地会遇到误匹配的情况。如果我们把错误匹配输入到PnP或ICP中，会发生怎样的情况？你能想到哪些避免误匹配的方法？

将错误的特征点匹配输入到PNP（Perspective-n-Point）或ICP（Iterative Closest Point）等姿态估计或点云配准算法中可能导致不正确的结果或失败，因为这些算法高度依赖于输入数据的准确性。误匹配可能会导致以下问题：

1. 错误的姿态估计或配准结果：错误的特征点匹配会导致姿态估计或点云配准的误差，因为算法会试图将不相关的点或错误匹配的点纳入计算，从而影响最终的结果。
2. 算法发散：错误的匹配可能导致算法发散，无法收敛到正确的解决方案，或者在迭代中出现奇异点，导致算法失败。

为了避免误匹配，可以考虑以下方法：

1. 特征选择和筛选：在进行特征点匹配之前，使用特征选择和筛选方法来排除低质量或不稳定的特征点。这可以通过各种技术来实现，例如使用特征描述符的一致性检查、RANSAC（随机抽样一致性）等。
2. 阈值设定：设定阈值来筛除具有大误差的匹配点对。只有当匹配误差小于一定阈值时，才将它们输入到PNP或ICP算法中。
3. 外点剔除：使用鲁棒估计方法（如RANSAC）来排除外点，这些外点可能是由于误匹配引入的。RANSAC可以识别和剔除与其他点明显不一致的点。
4. 局部一致性：在ICP中，可以使用一些方法来检查点云的局部一致性，从而减少误匹配的影响。例如，使用法线信息来验证点云配准的正确性。
5. 使用多传感器信息：如果可用，结合多个传感器的信息（例如相机、惯性传感器、激光雷达等）可以提高姿态估计和配准的稳定性和准确性，减少误匹配的影响。
6. 后处理：在完成姿态估计或点云配准之后，可以进行后处理步骤，例如滤波或平滑，以进一步减少误匹配的影响。
7. 重复性检查：在实际应用中，可以通过多次姿态估计或配准，并检查结果的一致性来减小误匹配的潜在影响。

误匹配是计算机视觉和点云处理中常见的问题，但可以通过前期特征选择、阈值设定、外点剔除等方法来降低其影响，并通过多传感器信息和后处理来提高结果的稳定性和准确性。


1. [PnP算法详解（超详细公式推导）](https://www.jianshu.com/p/a35fa8ac0803)
2. [【Frobenius norm（弗罗贝尼乌斯-范数）（F-范数）】](https://blog.csdn.net/weixin_45251808/article/details/102968002)
3. [3D-2D：PnP算法原理](https://blog.csdn.net/u014709760/article/details/88029841)
4. [PnP(Perspective-n-Point)问题：各种算法总结分析](https://zhuanlan.zhihu.com/p/399140251)
5. [位姿估计之PnP算法](https://blog.csdn.net/feng_float/article/details/122693009)
6. [相机位姿求解——P3P问题](https://www.cnblogs.com/mafuqiang/p/8302663.html)
7. [[PnP]PnP问题之EPnP解法](https://zhuanlan.zhihu.com/p/59070440)
8. [深入EPnP算法](https://blog.csdn.net/jessecw79/article/details/82945918)
9. [EPnP原理与源码详解](https://zhuanlan.zhihu.com/p/361791835)
10. [三维点云配准之ICP算法](https://wangwenlonggg.github.io/2021/05/26/%25E4%25B8%2589%25E7%25BB%25B4%25E7%2582%25B9%25E4%25BA%2591%25E9%2585%258D%25E5%2587%2586%25E4%25B9%258BICP%25E7%25AE%2597%25E6%25B3%2595/)
11. [三维点云配准 -- ICP 算法原理及推导](https://zhuanlan.zhihu.com/p/104735380)








